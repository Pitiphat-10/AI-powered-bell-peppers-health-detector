<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bell Pepper Health Detector</title>

  <!-- Tailwind (CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: { extend: {
        colors: { brand: {
          50:"#eefdf3",100:"#d7f7e2",200:"#b2efcb",300:"#83e2ae",
          400:"#4fd18e",500:"#22c06b",600:"#16a457",700:"#117f44",
          800:"#0d6236",900:"#0a4e2b"
        }}
      }}
    }
  </script>

  <!-- TensorFlow.js -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"></script>
  <!-- App -->
  <script defer src="script.js"></script>

  <style>
    @media (prefers-color-scheme: dark) { :root { color-scheme: dark; } }
    .leaf-bg{background-image:
      radial-gradient(1200px 800px at 80% -10%, rgba(34,192,107,.15), transparent 60%),
      radial-gradient(900px 600px at -10% 100%, rgba(34,192,107,.10), transparent 60%)}
  </style>
</head>
<body class="min-h-full leaf-bg bg-brand-50/40 text-brand-900 dark:bg-brand-900 dark:text-brand-50">
  <header class="py-6">
    <div class="mx-auto max-w-5xl px-4">
      <h1 class="text-2xl md:text-3xl font-semibold">ü´ë Bell Pepper Health Detector</h1>
      <p class="mt-1 text-sm text-brand-800/70 dark:text-brand-100/70">
        ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏π‡∏õ ‚Ä¢ ‡∏•‡∏≤‡∏Å-‡∏ß‡∏≤‡∏á ‚Ä¢ ‡∏ñ‡πà‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏Å‡∏•‡πâ‡∏≠‡∏á ‚Ä¢ ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏ú‡∏• CSV
      </p>
    </div>
  </header>

  <main class="mx-auto max-w-5xl px-4 pb-16">
    <div class="rounded-2xl border border-brand-600/15 bg-white/80 backdrop-blur-md shadow-lg p-5 dark:bg-brand-900/60 dark:border-brand-400/15">

      <!-- Control bar -->
      <div class="flex flex-wrap gap-3 items-center">
        <button id="addBtn" class="px-3 py-2 rounded-lg border border-brand-600/30 hover:bg-brand-100/50 dark:hover:bg-brand-800/50">
          ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏π‡∏õ‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå
        </button>
        <button id="cameraBtn" class="px-3 py-2 rounded-lg border border-brand-600/30 hover:bg-brand-100/50 dark:hover:bg-brand-800/50">
          ‡∏ñ‡πà‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏Å‡∏•‡πâ‡∏≠‡∏á
        </button>
        <button id="clearBtn" class="px-3 py-2 rounded-lg border border-brand-600/30 hover:bg-brand-100/50 dark:hover:bg-brand-800/50">
          ‡∏•‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
        </button>
        <button id="exportBtn" class="px-3 py-2 rounded-lg border border-brand-600/30 hover:bg-brand-100/50 dark:hover:bg-brand-800/50">
          ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏ú‡∏• (.csv)
        </button>
        <div id="status" class="ml-auto text-sm text-brand-800/70 dark:text-brand-100/70">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏°‡πÄ‡∏î‡∏•‚Ä¶</div>
      </div>

      <!-- Hidden file input -->
      <input id="upload" type="file" accept="image/*" multiple class="hidden" />

      <!-- Drop zone -->
      <div id="dropZone"
           class="mt-4 rounded-xl border-2 border-dashed border-brand-600/30 p-6 text-center
                  hover:bg-brand-100/40 dark:hover:bg-brand-800/40 transition">
        <p class="font-medium text-brand-800">‡∏•‡∏≤‡∏Å-‡∏ß‡∏≤‡∏á‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏î ‚Äú‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏π‡∏õ‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå‚Äù ‡∏´‡∏£‡∏∑‡∏≠ ‚Äú‡∏ñ‡πà‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏Å‡∏•‡πâ‡∏≠‡∏á‚Äù</p>
        <p class="text-xs text-brand-800/70">‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡πÑ‡∏ü‡∏•‡πå</p>
      </div>

      <!-- Progress -->
      <div id="progressWrap" class="hidden mt-4">
        <div class="h-2 w-full rounded-full bg-brand-100/70 dark:bg-brand-800/70 overflow-hidden">
          <div id="bar" class="h-2 w-0 bg-brand-500 transition-all"></div>
        </div>
        <p id="progressText" class="mt-2 text-xs text-brand-800/70">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‚Ä¶</p>
      </div>

      <!-- Gallery + results -->
      <div id="gallery" class="mt-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5"></div>
    </div>

    <p class="mt-6 text-xs text-brand-800/70 dark:text-brand-100/70">
      * ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏ó‡∏≥‡∏ö‡∏ô‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå
    </p>
  </main>

  <!-- Camera modal -->
  <div id="camModal" class="fixed inset-0 hidden items-center justify-center bg-black/50 p-4 z-50">
    <div class="w-full max-w-md rounded-2xl overflow-hidden border border-brand-600/20 bg-white dark:bg-brand-900">
      <div class="p-4 border-b border-brand-600/20 flex items-center justify-between">
        <h3 class="font-semibold">‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å‡∏Å‡∏•‡πâ‡∏≠‡∏á</h3>
        <button id="camClose" class="text-sm px-2 py-1 rounded border border-brand-600/30 hover:bg-brand-100/50 dark:hover:bg-brand-800/50">‡∏õ‡∏¥‡∏î</button>
      </div>
      <div class="p-4 space-y-3">
        <video id="video" autoplay playsinline class="w-full rounded-lg bg-black/30 aspect-video"></video>
        <div class="flex gap-3">
          <button id="camCapture" class="px-3 py-2 rounded-lg border border-brand-600/30 hover:bg-brand-100/50 dark:hover:bg-brand-800/50">
            ‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û
          </button>
          <button id="camSwitch" class="px-3 py-2 rounded-lg border border-brand-600/30 hover:bg-brand-100/50 dark:hover:bg-brand-800/50">
            ‡∏™‡∏•‡∏±‡∏ö‡∏Å‡∏•‡πâ‡∏≠‡∏á (‡∏´‡∏ô‡πâ‡∏≤/‡∏´‡∏•‡∏±‡∏á)
          </button>
        </div>
        <canvas id="canvas" class="hidden"></canvas>
      </div>
    </div>
  </div>
</body>
</html>
